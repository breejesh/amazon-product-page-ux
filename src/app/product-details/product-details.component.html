<!-- Sticky Navigation Bar below Header -->
<div class="product-details-container">
  <nav class="product-nav">
    <a [class.active]="activeSection === section"
      (click)="setActiveSection(section)" *ngFor="let section of sections">
      {{section | titlecase}}
    </a>
  </nav>

  <!-- Sticky Header -->
  <div class="sticky-header" *ngIf="showStickyHeader">
    <div class="sticky-content ps-4">
      <img [src]="product.images[0]" alt="Product Thumbnail" class="sticky-thumbnail">
      <div class="sticky-info d-flex flex-row">
        <div class="d-flex flex-column pe-4 ms-2">
          <div style="font-weight: 600;">{{ product.shortName }}</div>
          <div class="d-flex flex-row">
            <div style="font-size: 1.4rem;">{{ product.price | currency:'INR':'symbol' }}</div>
            <span class="mt-2 ms-2 me-2" style="text-decoration: line-through; font-weight: 300;"> {{ product.originalPrice | currency:'INR':'symbol' }} </span> 
            <span class="mt-2" style="color: red;" > -52% </span>
          </div>
        </div>
        <div class="d-flex flex-column ms-4">
          <img class="click mt-1" (click)="setActiveSection('reviews')" src="assets/product/product-rating.png" style="width: 240px;" alt="Product Rating" />
          <div class="d-flex flex-row">
            <img src="assets/product/product-ac.png" style="width: 120px;" class="me-2"  alt="Amazon Choice" />
            <img class="mt-1" src="assets/product/product-prime.png" style="width: 60px; height: 20px; " alt="Amazon product-prime" />
          </div>
        </div>

      </div>
      <div class="sticky-actions">
        <button (click)="addToCartHandler()" class="add-to-cart-btn me-1">Add to Cart &nbsp;&nbsp;<span class="badge rounded-pill text-bg-dark" *ngIf="this.cartItems && this.cartItems.length > 0">{{this.currentProductCount()}}</span></button>
        <button class="buy-now-btn ms-2">Buy Now</button>
      </div>
    </div>
  </div>
  
  <!-- Product Details Section -->
  <div id="summary" class="product-summary">
    <div class="left-side sticky">
      <div class="image-gallery">
        <div class="thumbnails">
          <img *ngFor="let image of product.images; let i = index" (click)="setThumbIndex(i)" [src]="image" class="thumbnail" [class.active]="i === thumbIndex" />
        </div>
        <div class="image-container">
          <div class="image-overlay">
            <img [src]="product.images[thumbIndex]" alt="Main Product Image" class="main-image" />
            <div class="wishlist-icon" (click)="toggleWishlist()">
              <i class="fa fa-heart" [class.active]="product.inWishlist"></i>
            </div>
          </div>
          <div class="action-buttons">
            <button (click)="addToCartHandler()" class="add-to-cart-btn">Add to Cart &nbsp;&nbsp;<span class="badge rounded-pill text-bg-dark" *ngIf="this.cartItems && this.cartItems.length > 0">{{this.currentProductCount()}}</span></button>
            <button class="buy-now-btn">Buy Now</button>
          </div>
        </div>
      </div>
    </div>

    <div class="right-side pr-4">
      <div>
        <h4>{{ product.name }}</h4>
        <img class="click" (click)="setActiveSection('reviews')" src="assets/product/product-rating.png" style="width: 240px;" alt="Product Rating" />
        <div class="badges my-2">
          <img src="assets/product/product-ac.png" style="width: 120px;" class="me-2"  alt="Amazon Choice" />
          <img src="assets/product/product-prime.png" style="width: 60px;" alt="Amazon product-prime" />
        </div>

      </div>
      <div>
        <span class="me-2" style="font-size: 1.8rem; font-weight: 400;"> {{ product.price | currency:'INR':'symbol' }}</span> 
        <span class="me-2" style="text-decoration: line-through; font-weight: 300;"> {{ product.originalPrice | currency:'INR':'symbol' }} </span> 
        <span style="color: red;" > -52% </span>       
      </div>
      <hr/>
      <div class="d-flex flex-row">
        <h5 class="me-4"  style="font-size: 16px; color: #444; font-weight: 600;">Delivery</h5>
        <img src="assets/product/product-delivery.png" style="width: 380px;" class="me-2"  alt="Delivery" />
      </div>
      <hr/>
      <div class="d-flex flex-row">
        <h5 class="me-4" style="font-size: 16px; color: #444; font-weight: 600;">Variants</h5>
        <img src="assets/product/product-variants.png" style="width: 220px;" class="me-2"  alt="Variants" />
      </div>
      <hr/>
      <img src="assets/product/product-badges.png" style="width: 360px;" class="me-2"  alt="badges" />      
      <hr/>
      <div class="d-flex flex-column">
        <h5 class="me-4" style="font-size: 16px; color: #444; font-weight: 600;">Highlights</h5>
        <ul>
          <li>Resolution: 4K Ultra HD (3840 x 2160) | Refresh Rate: 60 Hertz</li>
          <li>Connectivity: 3 HDMI ports to connect set top box, Blu Ray players, gaming console | 2 USB ports to connect hard drives and other USB devices</li>
          <li>Sound : 20 Watts Output | 2ch |Open Baffle Speaker | Dolby Audio |2 Full Range (44.5 x 106mm)</li>
          <li>Smart TV Features: Google TV | Watchlist | Google Assistant | Chromecast Built In | Game menu | ALLM/eARC (HDMI 2.1 Compatible) | Additional Features: Apple Airplay | Apple Homekit | Alexa</li>
          <li>Display : 4K LED | 4K Processor X1 | Live Color | 4K X-Reality PRO | MotionFlow XR 100 | HDR10/HLG</li>
        </ul>
      </div>
    </div>
  </div>

  <div id="brand" class="brand-info">
    <img src="assets/product/brand1.png" style="width: 100%;" alt="Brand" />
    <img src="assets/product/brand2.png" style="width: 100%;" alt="Brand" />
    <img src="assets/product/brand3.png" style="width: 100%;" alt="Brand" />
    <img src="assets/product/brand4.png" style="width: 100%;" alt="Brand" />
  </div>
  <div id="details" class="details px-4 pb-4 border-bottom">
    <h3 class="section-header"> Product Details </h3>
    <img src="assets/product/product-details.png" style="width: 100%;" alt="Product Details" />
  </div>
  <!-- Reviews Section -->
  <div id="reviews" class="reviews px-4 pb-4 border-bottom">
    <h3 class="section-header"> Customer Reviews </h3>
    <img src="assets/product/reviews-summary.png" style="width: 100%; margin-left: -60px;" alt="Review Summary" />
    <img src="assets/product/reviews-data.png" style="width: 100%; margin-left: -30px;" alt="Review Data" />
  </div>
  
  <!-- Placeholder for Recommendations Section -->
  <div id="recommendations" class="recommendations px-4 pb-4">
    <h3 class="section-header"> Recommended Products </h3>
    <img src="assets/product/recommended-related.png" style="width: 100%;" alt="Recommended Realted" />
    <img src="assets/product/recommended-similar.png" style="width: 100%;" alt="Recommended Similar" />
  </div>
</div>  